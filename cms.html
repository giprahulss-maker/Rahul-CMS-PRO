<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rahul Gutenberg Studio</title>

<link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet"/>
<script src="https://unpkg.com/grapesjs"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:#f0f0f1;
}

/* ===== TOPBAR ===== */

.wp-topbar{
  height:60px;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  border-bottom:1px solid #ddd;
}

.wp-topbar .left button{
  font-size:18px;
  background:none;
  border:none;
  cursor:pointer;
}

.wp-topbar input{
  border:none;
  font-size:18px;
  font-weight:500;
  text-align:center;
  outline:none;
  width:400px;
}

.wp-topbar .right button{
  background:#0073aa;
  border:none;
  padding:8px 14px;
  color:white;
  border-radius:4px;
  cursor:pointer;
  margin-left:8px;
}

.wp-topbar .right button:hover{
  background:#005177;
}

/* ===== LAYOUT ===== */

.wp-layout{
  display:flex;
  height:calc(100vh - 60px);
}

/* ===== SIDEBAR ===== */

.wp-sidebar{
  width:260px;
  background:#fff;
  border-right:1px solid #ddd;
  padding:20px;
  overflow:auto;
}

.wp-sidebar h3{
  margin-top:0;
}

.wp-sidebar button{
  display:block;
  width:100%;
  margin-bottom:10px;
  padding:10px;
  border:1px solid #ddd;
  background:white;
  cursor:pointer;
  text-align:left;
  font-size:14px;
}

.wp-sidebar button:hover{
  background:#f3f4f6;
}

/* ===== EDITOR AREA ===== */

.wp-editor{
  flex:1;
  background:#dcd2c2;
  display:flex;
  justify-content:center;
  overflow:auto;
}

#gjs{
  width:800px;
  background:#dcd2c2;
  padding:60px 40px;
  min-height:100%;
}

/* Remove Grapes default UI */
.gjs-pn-panel{
  display:none !important;
}
.gjs-cv-canvas{
  background:#dcd2c2 !important;
}
</style>
</head>

<body>

<div class="wp-topbar">
  <div class="left">
    <button onclick="toggleSidebar()">â˜°</button>
  </div>

  <div class="center">
    <input type="text" id="docTitle" placeholder="Add title">
  </div>

  <div class="right">
    <button onclick="saveContent()">Save</button>
    <button onclick="exportPDF()">Publish</button>
  </div>
</div>

<div class="wp-layout">

  <div class="wp-sidebar" id="sidebar">
    <h3>Blocks</h3>
    <button onclick="addParagraph()">Paragraph</button>
    <button onclick="addHeading()">Heading</button>
    <button onclick="addSubHeading()">Sub Heading</button>
    <button onclick="addImage()">Image</button>
    <button onclick="addQuote()">Quote</button>
    <button onclick="addList()">List</button>
    <button onclick="addTable()">Table</button>
  </div>

  <div class="wp-editor">
    <div id="gjs"></div>
  </div>

</div>

<script>

/* ===== INIT EDITOR ===== */

const editor = grapesjs.init({
  container:'#gjs',
  height:'100%',
  storageManager:false,
});

/* ===== BLOCK FUNCTIONS ===== */

function addParagraph(){
  editor.addComponents(`<p>Start writing your content here...</p>`);
}

function addHeading(){
  editor.addComponents(`<h2>Heading</h2>`);
}

function addSubHeading(){
  editor.addComponents(`<h3>Sub Heading</h3>`);
}

function addImage(){
  editor.addComponents(`
    <figure>
      <img src="https://via.placeholder.com/700x350" style="max-width:100%">
      <figcaption>Image caption</figcaption>
    </figure>
  `);
}

function addQuote(){
  editor.addComponents(`<blockquote style="border-left:4px solid #999;padding-left:15px;">Quote text...</blockquote>`);
}

function addList(){
  editor.addComponents(`<ul><li>List item</li></ul>`);
}

function addTable(){
  editor.addComponents(`
    <table border="1" cellpadding="6" style="width:100%;border-collapse:collapse;">
      <tr><th>Header 1</th><th>Header 2</th></tr>
      <tr><td>Data</td><td>Data</td></tr>
    </table>
  `);
}

/* ===== SIDEBAR TOGGLE ===== */

function toggleSidebar(){
  const sidebar = document.getElementById("sidebar");
  sidebar.style.display =
    sidebar.style.display === "none" ? "block" : "none";
}

/* ===== SAVE ===== */

function saveContent(){
  const content = editor.getHtml();
  const title = document.getElementById("docTitle").value;
  localStorage.setItem("rahulDoc", JSON.stringify({title,content}));
  alert("Saved successfully!");
}

/* ===== LOAD ON START ===== */

window.onload = function(){
  const saved = JSON.parse(localStorage.getItem("rahulDoc"));
  if(saved){
    document.getElementById("docTitle").value = saved.title;
    editor.setComponents(saved.content);
  }
};

/* ===== EXPORT PDF ===== */

function exportPDF(){
  const element = document.createElement("div");
  element.innerHTML = `<h1>${document.getElementById("docTitle").value}</h1>` + editor.getHtml();
  html2pdf().from(element).save("document.pdf");
}

</script>

</body>
</html>
